# 프로세스 vs 스레드

## 📌 프로세스
![process](https://user-images.githubusercontent.com/70262329/103772181-6cfad500-506c-11eb-879b-6e232a5f0bb6.png)

- 프로그램을 메모리 상에서 실행중인 작업

  → 실행 중인 프로그램, 디스크로부터 메모리에 적재되어 CPU의 할당을 받은 작업의 단위.

- 운영체제로부터 시스템 자원(주소 공간, 파일, 메모리 등)을 할당 받음.

- 할당받는 시스템 자원

  - CPU 시간
  - 운영되기 위한 주소 공간
  - Code, Data, Stack, Heap 의 구조로 되어있는 독립된 메모리 영역.
    - code : 코드 자체를 구성하는 메모리 영역( 프로그램 명령)
    - data : 전역변수, 정적변수, 배열 등
      - 초기화된 데이터 data에 저장 ↔  초기화되지 않은 데이터는 bss에 저장
    - heap : 동적 할당 시 사용 ( new(), malloc() 등)
    - stack : 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)
  - 함수의 매개변수, 복귀주소와 로컬 변수와 같은 임시자료를 갖는 프로세스 스택, 전역 변수들을 수록하는 데이터 섹션을 포함.
  - 프로세스 실행 중에 동적으로 할당되는 메모리인 힙을 포함.

- 기본적으로 프로세스마다 최소 1개의 스레드 소유 (메인 스레드 포함)

### PCB(Process Control Block)

- 특정 프로세스에 대한 중요 정보를 저장하고 있는 `**커널 내의 자료구조**`
- 운영체제는 프로세스를 관리하기 위해 프로세스의 생성과 동시에 고유한 PCB를 생성함.
- 프로세스는 CPU를 할당받아 작업을 처리하다가 프로세스 전환이 발생하면 진행하던 작업을 저장하고 CPU를 반환해야 함. 이 때, 작업의 진행 상황을 모두 PCB에 저장. → 후에 다시 CPU를 할당받게 되면 PCB에 저장되어 있던 내용을 불러와 종료되었던 시점부터 다시 작업 수행
- PCB에 저장되는 정보
  - 프로세스 식별자 (PID)
  - 프로세스 상태 : new, ready, running, waiting, terminated 등의 상태를 저장
  - 프로그램 카운터 (PC) : 프로세스가 다음에 실행할 명령어의 주소를 가리킴.
  - CPU 레지스터
  - CPU 스케줄링 정보 : 프로세스의 우선순위, 스케줄 큐에 대한 포인터 등
  - 메모리 관리 정보 : 페이지 테이블 or 세그먼트 테이블 등과 같은 정보를 포함
  - 입출력 상태 정보 : 프로세스에 할당된 입출력 장치들과 열린 파일 목록
  - 어카운팅 정보 : 사용된 CPU 시간, 시간 제한, 계정 정보 등

## 📌 스레드
![스레드](https://user-images.githubusercontent.com/70262329/103772189-6ff5c580-506c-11eb-9cb6-0aa016244305.png)


- 프로세스의 실행 단위

- 한 프로스세 내에서 동작되는 여러 실행 흐름으로 프로세스 내의 주소 공간이나 자원을 공유할 수 있음.

- 스레드는 프로세스 내의 code, data, heap 영역은 다른 스레드와 공유하고 stack 영역을 따로 할당 받음.

- 여러 스레드는 한 프로세스 내의 code, data, heap 영역을 공유하지만, 프로세스 간에는 메모리에 접근할 수 없음.

- 스레드는 별도의 레지스터와 스택을 갖고 있으며, 다른 영역을 공유함.

  → 따라서, 한 스레드가 프로세스의 자원을 변경하면, 다른 스레드도 그 변경 결과를 즉시 확인 가능.

## 📌 Process vs Thread

- `프로세스` : 자신만의 고유 공간과 자원을 할당받아 사용하는 작업의 단위
- `스레드` : 프로세스 내에서 실행되는 흐름의 단위, 다른 스레드와 프로세스의 자원과 공간을 공유하며 사용
